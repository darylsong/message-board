(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{64:function(e,t,n){e.exports=n(92)},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),u=n.n(c),o=n(5),l=n.n(o),s=n(8),i=n(13),p=n(19),m=n(14),f=n(128),v=n(129),b=n(132),h=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),"Home")},E=n(131),d=n(123),g=n(93),O=n(124),j=n(125),w=n(126),x=n(127),y=n(10),S=n.n(y),k=null,C=function(){return k},A=function(e){k="bearer ".concat(e)},I="/api/sections",P={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSection:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(I,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.post(I,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C()}},e.next=3,S.a.put("".concat(I,"/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.delete("".concat(I,"/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/comments");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getComment:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat("/api/comments","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPostComments:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/comments");case 2:return n=e.sent,e.abrupt("return",n.data.filter((function(e){return e.post.id===t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.post("/api/comments",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C()}},e.next=3,S.a.put("".concat("/api/comments","/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.delete("".concat("/api/comments","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/posts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPost:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat("/api/posts","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSectionPosts:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/api/posts");case 2:return n=e.sent,e.abrupt("return",n.data.filter((function(e){return e.section.id===t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.post("/api/posts",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C()}},e.next=3,S.a.put("".concat("/api/posts","/").concat(t),n,a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:C()}},e.next=3,S.a.delete("".concat("/api/posts","/").concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D={getUsers:function(){return S.a.get("/api/users").then((function(e){return e.data}))},getUser:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(e){var t=e.post;e.postCreator;return r.a.createElement("div",null,"Title: ",t.title," ",r.a.createElement("br",null),"Posted by: ",t.user.name," ",r.a.createElement("br",null),"Message: ",t.content.slice(-1)[0].text," ",r.a.createElement("br",null),r.a.createElement("br",null))},M=function(e){var t=e.comment;return r.a.createElement("div",null,"Posted by: ",t.user.name," ",r.a.createElement("br",null),"Comment: ",t.content.slice(-1)[0].text," ",r.a.createElement("br",null),r.a.createElement("br",null))},H=function(e){var t=e.sectionId,n=e.user,c=Object(a.useState)([]),u=Object(i.a)(c,2),o=u[0],l=u[1],s=Object(a.useState)({title:"",content:[{text:""}],user:{name:""}}),f=Object(i.a)(s,2),v=f[0],b=f[1],h=Object(a.useState)({}),E=Object(i.a)(h,2),d=E[0],g=(E[1],Object(a.useState)("")),O=Object(i.a)(g,2),j=O[0],w=O[1],x=Object(m.h)().postId,y=Object(m.i)("/sections/".concat(t,"/").concat(x)),S=Object(m.g)();Object(a.useEffect)((function(){var e="";U.getPostComments(x).then((function(e){console.log("postId",x),console.log("data",e),l(e)})),z.getPost(x).then((function(t){e=t.user,D.getUser(e).then((function(e){console.log("user",e),t.user=e,b(t)}))}))}),[x]);var k=function(e){e.preventDefault(),U.create({text:j,postId:x}).then((function(e){D.getUser(e.user).then((function(t){e.user=t,l(o.concat(e))}))})),w(""),S.push("".concat(y.path))};return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(y.path,"/create")},null===n?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("form",{onSubmit:k},r.a.createElement("h2",null,"add comment"),"text:",r.a.createElement("input",{id:"text",value:j,onChange:function(e){var t=e.target;return w(t.value)}}),r.a.createElement("br",null),r.a.createElement("button",{id:"submit-button",type:"submit"},"create"))),r.a.createElement(m.b,{path:y.path},r.a.createElement("h1",null,"Post"),r.a.createElement(J,{post:v,postCreator:d}),r.a.createElement("h1",null,"Comments"),o.map((function(e){return r.a.createElement(M,{comment:e,key:e.id})})),null===n?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(p.b,{to:"".concat(y.path,"/create")},r.a.createElement("button",null,"create new")))))},N=function(e){var t=e.user,n=Object(a.useState)([]),c=Object(i.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),f=s[0],v=s[1],h=Object(a.useState)(""),y=Object(i.a)(h,2),S=y[0],k=y[1],C=Object(m.h)().sectionId,A=Object(m.i)("/sections/".concat(C)),I=Object(m.g)();Object(a.useEffect)((function(){z.getSectionPosts(C).then((function(e){o(e)}))}),[C]);var P=function(e){e.preventDefault(),z.create({title:f,text:S,sectionId:C}).then((function(e){D.getUser(e.user).then((function(t){console.log(t),e.user=t,o(u.concat(e))}))})),v(""),k(""),I.push("".concat(A.path))};return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(A.path,"/create")},null===t?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Create post"),r.a.createElement("form",{onSubmit:P},r.a.createElement("div",null,r.a.createElement(E.a,{label:"title",value:f,onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"text",value:S,onChange:function(e){var t=e.target;return k(t.value)}})),r.a.createElement("div",null,r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit"},"create"))))),r.a.createElement(m.b,{path:"".concat(A.path,"/:postId")},r.a.createElement(H,{user:t,sectionId:C})),r.a.createElement(m.b,{path:A.path},r.a.createElement("h1",null,"Posts"),r.a.createElement(d.a,{component:g.a},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement("strong",null,"Title")),r.a.createElement(x.a,null,r.a.createElement("strong",null,"Message")),r.a.createElement(x.a,null,r.a.createElement("strong",null,"Posted by"))),u.map((function(e){return r.a.createElement(w.a,{key:e.id},r.a.createElement(x.a,null,r.a.createElement(p.b,{to:"".concat(A.path,"/").concat(e.id)},e.title)),r.a.createElement(x.a,null,e.content.slice(-1)[0].text),r.a.createElement(x.a,null,e.user.name))}))))),null===t?r.a.createElement("div",null):r.a.createElement(b.a,{variant:"outlined",color:"inherit",component:p.b,to:"".concat(A.path,"/create")},"create new")))},T=function(e){var t=e.user,n=Object(a.useState)([]),c=Object(i.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),f=s[0],v=s[1],h=Object(a.useState)(""),y=Object(i.a)(h,2),S=y[0],k=y[1],C=Object(m.i)("/sections"),A=Object(m.g)();Object(a.useEffect)((function(){P.getAll().then((function(e){o(e)}))}),[]);var I=function(e){e.preventDefault(),P.create({name:f,description:S}).then((function(e){o(u.concat(e))})),v(""),k(""),A.push("/sections")};return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(C.path,"/create")},null===t?r.a.createElement(m.a,{to:"/login"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Create section"),r.a.createElement("form",{onSubmit:I},r.a.createElement("div",null,r.a.createElement(E.a,{label:"name",value:f,onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"description",value:S,onChange:function(e){var t=e.target;return k(t.value)}})),r.a.createElement("div",null,r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit"},"create"))))),r.a.createElement(m.b,{path:"".concat(C.path,"/:sectionId")},r.a.createElement(N,{user:t})),r.a.createElement(m.b,{path:C.path},r.a.createElement("h1",null,"Sections"),r.a.createElement(d.a,{component:g.a},r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(w.a,null,r.a.createElement(x.a,null,r.a.createElement("strong",null,"Section")),r.a.createElement(x.a,null,r.a.createElement("strong",null,"Description"))),u.map((function(e){return r.a.createElement(w.a,{key:e.id},r.a.createElement(x.a,null,r.a.createElement(p.b,{to:"".concat(C.path,"/").concat(e.id)},e.name)),r.a.createElement(x.a,null,e.description))}))))),null===t?r.a.createElement("div",null):r.a.createElement(b.a,{variant:"outlined",color:"inherit",component:p.b,to:"".concat(C.path,"/create")},"create new")))},B=function(e){var t=e.login,n=Object(a.useState)(""),c=Object(i.a)(n,2),u=c[0],o=c[1],p=Object(a.useState)(""),m=Object(i.a)(p,2),f=m[0],v=m[1],h=function(){var e=Object(s.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({username:u,password:f}),o(""),v("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:h},r.a.createElement("div",null,r.a.createElement(E.a,{label:"username",value:u,onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"password",value:f,type:"password",onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit"},"login"))))},L=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1],p=Object(a.useState)(""),m=Object(i.a)(p,2),f=m[0],v=m[1],h=Object(a.useState)(""),d=Object(i.a)(h,2),g=d[0],O=d[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Create Account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),D.createUser({username:n,name:l,email:f,password:g})}},r.a.createElement("div",null,r.a.createElement(E.a,{label:"username",value:n,onChange:function(e){var t=e.target;return c(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"name",value:l,onChange:function(e){var t=e.target;return s(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"email",value:f,onChange:function(e){var t=e.target;return v(t.value)}})),r.a.createElement("div",null,r.a.createElement(E.a,{label:"password",value:g,type:"password",onChange:function(e){var t=e.target;return O(t.value)}})),r.a.createElement("div",null,r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit"},"create"))))},q={login:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);A(t.token),c(t)}}),[]);var u=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),A(n.token),c(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.removeItem("loggedUser"),A(null),c(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.a,null,r.a.createElement(f.a,{position:"static"},r.a.createElement(v.a,null,r.a.createElement(b.a,{color:"inherit",component:p.b,to:"/"},"home"),r.a.createElement(b.a,{color:"inherit",component:p.b,to:"/sections"},"sections"),null===n?r.a.createElement("span",null,r.a.createElement(b.a,{color:"inherit",component:p.b,to:"/login"},"login"),r.a.createElement(b.a,{color:"inherit",component:p.b,to:"/register"},"register")):r.a.createElement(b.a,{color:"inherit",onClick:o},"logout of ",n.name))),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/register"},r.a.createElement(L,null)),r.a.createElement(m.b,{path:"/login"},null===n?r.a.createElement(B,{login:u}):r.a.createElement(m.a,{to:"/"})),r.a.createElement(m.b,{path:"/sections"},r.a.createElement(T,{user:n})),r.a.createElement(m.b,{path:"/"},r.a.createElement(h,null))))},G=n(130);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G.a,null,r.a.createElement(F,null))),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.141fac5e.chunk.js.map